#!/usr/bin/env bash
# Install by pointing git to this directory: `git config core.hooksPath .githook`
set -euo pipefail

run() {
  echo "==> $*"
  "$@"
}

run cargo fmt --all -- --check
run cargo clippy --all-targets --all-features -- -D warnings
run cargo test

echo "==> PROTOBLOCK_RUN_REGTESTS=1 cargo test regtest"
PROTOBLOCK_RUN_REGTESTS=1 cargo test regtest
